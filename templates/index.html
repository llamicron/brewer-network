<html lang="en">

<head>
  <title>Brewer Network</title>
  <!-- Raleway Font -->
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.5.1/css/bulma.css">
  <script src="https://use.fontawesome.com/cc35b7b927.js"></script>
  <script src="/static/smooth-scroll.min.js"></script>
</head>

<body>
  <!-- Main Hero -->
  <section id="main" class="hero is-primary is-fullheight">
    <div class="hero-body">
      <div class="container">
        <div class="columns">
          <div class="column">
            <h1 class="title">
              Set Brewpi Wifi
            </h1>
            {% with messages = get_flashed_messages() %} {% if messages %} {% for message in messages %}
            <hr>
            <h2 class="subtitle">
              {% if session["error"] %}
              <article class="message is-danger">
                <div class="message-body">
                  {{ message }}
                </div>
              </article>
              {% else %}
              <strong>
                {{ message }}
              </strong> {% endif %}
            </h2>
            {% endfor %} {% endif %} {% endwith %}

            <!--Scroll down button -->
            <a id="scroll-down-button" data-scroll href="#supplicant-window" class="button is-warning">
              <i class="fa fa-chevron-down"></i>
            </a>
          </div>
          <div class="column">
            <div class="box">
              <!-- Write Webhook Form -->
              <form action="/write-webhook" method="POST">
                <!-- Webhook Text Field -->
                <div class="field">
                  <label class="label">Slack Webhook</label>
                  <div class="control">
                    <input class="input" name="webhook" type="text" placeholder="Slack Webhook" value="{{ webhook }}">
                  </div>
                </div>

                <!-- Webhook Form Submit Button -->
                <div class="columns">
                  <div class="column is-2">
                    <button type="submit" class="button is-primary">
                      Submit
                    </button>
                  </div>
                  <div class="column">
                    <div class="is-pulled-right">
                      Current Slack Webhook: <code>{{ webhook }}</code>
                    </div>
                  </div>
                </div>
              </form>
            </div>
            <div class="box">
              <!-- Write Supplicant Form -->
              <form action="/write-supplicant" method="POST">
                <!-- SSID Text Field-->
                <div class="field">
                  <label class="label">SSID</label>
                  <div class="control">
                    <input class="input" name="ssid" type="text" placeholder="SSID">
                  </div>
                </div>

                <!-- Password Text Field-->
                <div class="field">
                  <label class="label">Passphrase</label>
                  <div class="control">
                    <input class="input" name="password" type="text" placeholder="Passphrase">
                  </div>
                </div>

                <!-- Priority Text Field -->
                <div class="field">
                  <label class="label">Priority</label>
                  <div class="control">
                    <input class="input" pattern="-?[0-9]*(\.[0-9]+)?" name="priority" type="text" placeholder="Priority (Make it a number)">
                  </div>
                </div>

                <article class="message is-warning">
                  <div class="message-body">
                    You need to set the Slack webhook <i>before</i> submitting wireless credentials. This site will not
                    be accessable after submitting this form.
                  </div>
                </article>
                <!-- Submit Button -->
                <div class="columns">
                  <div class="column">
                    <div class="control">
                      <button class="button is-primary">Submit</button>
                    </div>
                  </div>
                  <div class="column">
                    <code class="is-pulled-right">
                      {{ file }}
                    </code>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End Hero-->

  <!-- About Hero -->
  <section id="about" class="hero is-info is-medium">
    <div class="hero-body">
      <div class="container">
        <h2 class="subtitle">
          The Brewpi acts as a WAP (Wireless Access Point) so it can be accessed without a network connection. You can use this tool
          to set wireless credentials to make a connection.
        </h2>
      </div>
    </div>
  </section>
  <!-- End Hero -->

  <!-- Supplicant Window Hero -->
  <section id="supplicant-window" class="hero is-dark is-fullheight">
    <div class="hero-body">
      <div class="container">
        <article class="message is-success">
          <div class="message-header">
            <p><strong>Contents of</strong> <code>{{ file }}</code></p>
          </div>
          <div class="message-body">
            <code>
              <!-- I had to do some funky shit with this. Sorry. -->
              {% for line in file_lines %}
                {% if "=" in line and "network" not in line %}
                  &nbsp;&nbsp;{{ line }}
                {% elif line == "}" %}
                  {{ line }}
                  <br>
                {% else %}
                  {{ line }}
                {% endif %}
                <br>
              {% endfor %}
            </code>
          </div>
        </article>

        <!-- Scroll Up Button-->
        <div class="columns">
          <div class="column has-text-centered">
            <a id="scroll-down-button" data-scroll href="#main" class="button is-warning">
              <i class="fa fa-chevron-up"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End Hero -->

</body>

</html>

<script>
  var scroll = new SmoothScroll('a[href*="#"]');

</script>
